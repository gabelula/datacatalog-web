<% content_for :title do %>
  User Accounts : Editing <%= @user.display_name %>
<% end %>

<% content_for :body_class do %>admin<% end %>

<% content_for :tabs do %>
  <%= render 'admin/tabs' %>
<% end %>

<div id="ltColumn">
  <%= show_flash_message %>
  <div id="user_keys">
  <table id="keys">
    <tr id="titles">
      <th class="keyType left">Key Type</th>
      <th class="keyPurpose">Key/Purpose</th>
      <th class="keyOptions right">Options</th>
    </tr>
    <% @user.api_user.api_keys.each do |key| %>
    <tr class="user_keys">
      <td class="left"><%= key.key_type %></td>
      <td class="keyContent">
        <div class="key"><%= key.api_key %></div>
        <p><%= key.purpose %></p>
      </td>
      <td class="right">
        <% unless key.key_type == "primary" -%>
          <%= link_to "Delete", admin_user_key_path(@user.id, key.id), :method => :delete %>
        <% end -%>
      </td>
    </tr>
    <% end %>
  </table>
  </div>

</div>

<div id="rtColumnWrapper">
  <div id="rtColumn" class="withBg">
  <% form_for @user, :url => admin_user_path(@user.id), :method => :put do |f| %>
    <%= f.error_messages :header_message => "Uh-oh!", :message => "The following problems occurred:" %>
    <ul>
      <li>
        <%= f.label :role %>
        <%= f.select :role, User::ROLES, :selected => user_role(f.object) %>
      </li>
      <%= render "users/form", :form => f %>
      <button class="update" id="user_submit" type="submit" value="Update" name="commit">
        <span>Update</span>
      </button>
    </ul>
  <% end %>

  <div class="clear"></div>
  </div>
</div>
