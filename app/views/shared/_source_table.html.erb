<table id="browseTable">
  <thead>
    <tr id="titles">
      <th class="left">Data Set</th>
      <th class="left">Rating</th>
      <th class="center">Location</th>
      <th class="center">Organization</th>
      <th class="center">Formats</th>
    </tr>
  </thead>
  <tbody>
    <% @data_records.each do |data_record| -%>
      <tr class="<%= cycle 'even', 'odd' %>">
        <td class="dataContent left">
          <%= link_to data_record.title, data_record, :class => "dataName" %>
          <%= render "favorites/button", :data_record => data_record %>
          <p class="clear"><%= truncate(data_record.description, :length => 350) %></p>
        </td>
        <td class="center">
          <%= render 'ratings/stars', :rating => data_record.ratings_average %>
        </td>
        <td class="center">
          <span><%= data_record.organization.country %></span>
        </td>
        <td class="center">
          <%= link_to data_record.organization.name, data_record.organization %>
          </td>
        <td class="center">
          <% if data_record.downloads.any? -%>
            <ul class="downloadFormats">
              <% source.downloads.each do |download| %>
              <li>
                <a href="<%= download.url %>"><%= download.format.upcase %></a>
                <% unless download['size'].blank? %>
                  <span>(<%= download['size'] %>)</span>
                <% end %>
              </li>
              <% end %>
            </ul>
          <% end %>
        </td>
      </tr>
    <% end # @sources.each -%>
  </tbody>
</table> 
